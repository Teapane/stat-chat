<div class='container'>

  <div class='user-header'>
    <h1 style="width:50%"><%= @user.nickname %></h1>
      <h3>Top Cat: <%= @user.rank %> </h3>
     <hr style="height:2px;width:100%;background-color:orange" />
  </div>

  <div class='row'>
    <div class='col-md-6'>
      <div class='widget stacked'>
        <div class='widget-header'>
          <i class='icon-bar-chart'></i>
          <h3>Power Ranking</h3>
        </div>
        <div class='widget-content'>
          <canvas id='ranking-chart' height='300px' width='530px'>
          </canvas>
        </div>
      </div>
    </div>

    <div class='col-md-6'>
      <div class='widget stacked'>
        <div class='widget-header'>
          <i class='icon-bar-chart'></i>
          <h3>Points Breakdown</h3>
        </div>
        <div class='widget-content'>
          <canvas id='points-chart' height='300px' width='530px'>
          </canvas>
        </div>
      </div>
    </div>
  </div>

  <div class='user-header'>
    <h2 style="width:50%">Badges</h2>
    <hr style="height:2px;width:100%;background-color:orange" />
  </div>

  <div class='badges'>
    <% @badges.each do |badge| %>
      <div class='badge_container' style='margin:2%'>
        <h4><%= badge.name %></h4>
        <%= image_tag badge.image %>
        <div class='over-badge'>
          <p><%= badge.description %></p>
        </div>
      </div>
    <% end %>
  </div>

</div>

<script>
  $(function(){
    var data = [
      {
        value:  <%= @commits_score %>,
        color: "green"
      },
      {
        value: <%= @repos_score %>,
        color: "pink"
      },
      {
        value : <%= @exercism_submissions_score %>,
        color : "red"
      }
    ]
    var ctx = $("#points-chart").get(0).getContext("2d");
    new Chart(ctx).Pie(data);
  })


</script>

<script>
  $(function(){
    var data = {
      labels : <%= @weeks.inspect.html_safe %>,
      datasets : [
        {
          fillColor : "rgba(220,220,220,0.5)",
          strokeColor : "rgba(220,220,220,1)",
          pointColor : "rgba(220,220,220,1)",
          pointStrokeColor : "#fff",
          data : <%= @weekly_commits %>
        }
      ]
    }
    var ctx = $("#ranking-chart").get(0).getContext("2d");
    new Chart(ctx).Line(data);
  })
</script>
